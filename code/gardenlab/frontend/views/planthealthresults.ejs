<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Health Assessment Results</title>
</head>
<body>
    <h1>Plant Health Assessment Results</h1>
    
    <% if (data.input && data.input.images) { %> <!-- Check for an uploaded image -->
        <div>
            <h2>Uploaded Image:</h2>
            <img src="<%= data.input.images[0] %>" alt="Uploaded Image" style="width: 100%; max-width: 500px;">
        </div>
    <% } %>
    
    <% if (data.result && data.result.disease && data.result.disease.suggestions) { %> <!-- Ensure that disease suggestions are available -->
        <div>
            <h2>Disease Assessments:</h2>
            <ul class="assessments">
                <% data.result.disease.suggestions.forEach(function(disease) { %> <!-- Display disease assessments -->
                    <li class="assessment">
                        <h3><%= disease.name %></h3>
                        <p>Probability: <%= (disease.probability * 100).toFixed(2) %>%</p>
                        <% if (disease.similar_images && disease.similar_images.length > 0) { %>
                            <div>
                                <h4>Similar Images:</h4>
                                <% disease.similar_images.slice(0, 3).forEach(function(image) { %> <!-- Display up to three similar images -->
                                    <img src="<%= image.url %>" alt="Similar Image" class="assessment-image">
                                <% }); %>
                            </div>
                        <% } %>
                        <% if (disease.details && disease.details.treatment) { %> <!-- Check if treatment details are available -->
                            <div>
                                <h3>Treatment Suggestions:</h3>
                                <ul>
                                    <% if (disease.details.treatment.chemical && disease.details.treatment.chemical.length > 0) { %> <!-- Check if chemical treatments are available -->
                                        <li><strong>Chemical Treatment:</strong> <%= disease.details.treatment.chemical.join(', ') %></li>
                                    <% } %>
                                    <% if (disease.details.treatment.biological && disease.details.treatment.biological.length > 0) { %> <!-- Check if biological treatments are available -->
                                        <li><strong>Biological Treatment:</strong> <%= disease.details.treatment.biological.join(', ') %></li>
                                    <% } %>
									<% if (disease.details.treatment.prevention && disease.details.treatment.prevention.length > 0) { %> <!-- Check if prevention treatments are available -->
                                        <li><strong>Preventative Measures:</strong> <%= disease.details.treatment.prevention.join(', ') %></li>
                                    <% } %>
                                </ul>
                            </div>
                        <% } %>
                    </li>
                <% }); %>
            </ul>
        </div>
    <% } else { %>
        <p>No disease assessment results available.</p>
    <% } %>
</body>
</html>
